# GIF Art Engine For NFT 

## Introduction
That's an art engine that will allow u to create spectacular Gifs and Videos generated by overlapping multiple gif or video. The code was created by **me**, by taking ispiration from the one written by Hashlips, that for the moment only supports static images. I created this code to generate my own Gifs and to help others do the same for their projects. 

If you found my work useful for any of your projects, please make some donations to support me. I would really appreaciate that.

**MetaMask address**: 0x58d55348e16C1241D1b7e9238c7753e9c7BF19CB

**Discord username**: luffy2023 il cane fifone#2742 -> contact me if you need help

**Tutorial for this repository**: ...


These are some GIFs/Videos generated with my engine:

(https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/example5.gif)


## Important notes before starting

- The code was tested with FFmpeg version 4.2.4.

- Each Gif you put as layer should have the same size, length and number of frames of the others. If this condition won't be respected some layers will probably become static after a period of time.

- I'm really sorry if you will find some bugs trying to run the code. If you find some, please open an issue, so i can know what the problem is and i can fix it.


## What does the code allow you to do? 
When you have downloaded the code you will be able to generate your own GIFs and Videso using GIFs or Videos as layers. What the code will do is overlay all the GIFs or Videos you have chosen in the desired order and generate _n_ final GIFs or Videos. This is an example of generating a gif with five separate layers:

|Layer number|Layer|Name|Gif|
|------------|-----|----|---|
|1|Background|f8f9f9.gif|![Alt Text](https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/f8f9f9.gif)|
|2|Character |zombie-male.gif|![Alt Text](https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/zombie-male.gif)|
|3|Head      |tophat.gif|![Alt Text](https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/tophat.gif)|
|4|Eyes      |bigshades.gif|![Alt Text](https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/bigshades.gif)|
|5|Mouth     |lipstick-party_pink.gif|![Alt Text](https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/lipstick-party_pink.gif)|

**Output:**

![Alt Text](https://github.com/Goldo02/gif_art_engine_for_nft/blob/main/example/example1.gif)

### What functionality does it offer?

* Generate GIFs/Videos uniquely or not, randomly or by selecting a rarity for each individual layer.

* Generation of a preview GIF containing the first _n_ GIFs generated.

* Modification of JSON (Metadata) after generating the media.

* After generating a collection you will automatically find in the output folder a file called _rarity-list.txt_ that will tell you the actual percentage of presence of each layer in the collection.

* You can combine video and audio files to generate video + audio files.


## Installation, compilation and execution

**Note:** the code was not tested on macOS

**Requirements:** Windows or Linux operating system

On windows to install the Ubuntu bash/terminal watch this video: https://www.youtube.com/watch?v=1ap3hL-UR9I

Then open the terminal and run this three commands:
```
sudo apt-get update
sudo apt-get install g++
sudo apt-get install ffmpeg
```

If you have git installed and you want to clone the project, run this command:
```
git clone https://github.com/Goldo02/gif_art_engine_for_nft.git
```
After doing so, open the terminal and move to the folder where you cloned the project and go to the _src_ folder.

To compile the _main.cpp_ file use the command: 
```
g++ ../library/dnaGenerator.cpp ../library/metadataFunction.cpp ../library/myFFmpegConversion.cpp ../library/utils.cpp main.cpp -o main
```

To execute:
```
./main
```

To compile the _update-info.cpp_ file, use the command:
```
g++ ../library/utils.cpp ../library/metadataFunction.cpp update_info.cpp -o update_info
```

To execute:
```
./update_info
```

To compile the file _preview-gif.cpp_ use the command: 
```
g++ ../library/myFFmpegConversion.cpp preview_gif.cpp -o preview_gif
```

To execute:
```
./preview_gif
```

To compile the file _combine-video-and-audio.cpp_ use the command: 
```
g++ -Wall ../library/myFFmpegConversion.cpp combine_video_and_audio.cpp -o combine
```

To execute:
```
./combine
```

**Note:** remember that every time you modify one file you must also recompile it before running it, otherwise you will run the program out of date with the changes you made.

## Usage
To use the algorithm and modify it according to your needs you must open the file _main.cpp_. That's the part of the code to change:
```c++
const int scale = 240;
const string outputFormat = "gif";
const bool randomized = true;
const bool unique = true;
vector<int> collectionSize = {5, 6};
const vector<vector<string>> layerDir = 
{
{"1-background", "2-character", "3-head", "4-eyes", "5-lip"},
{"1-background", "2-character", "3-head"}
};

const string name = "CeloPunks YouTube test";
const string description = "i love CeloPunks";
const string image = "https://twitter.com/elonmusk";
const vector<pair<string,string>> extraMetadata = 
{
{"Compiler", "CeloPunks compiler"},
{"Github Author", "Goldo02"}
};
```

Description of variables:

* _scale_: is the output width, the height will be self-determined.

* _outputFormat_: is the format of the output files. If you are operating with GIFs, it should be gif, if u are operating with video should be a video format.

* _randomized_: set this parameter to true if you want the algorithm to choose random raritys, to false if not.

* _unique_: set this parameter to true if you want that each GIF or Video is unique, to false if you want that there is the possibilites that a GIF or a Video appear more than one time.

* _collectionSize_: contains the number of media u want to generate for each collection. This would be the grow edition size in the Hashlips art engine.

* _layerDir_: contains the layers to consider for each collection. **You don't need to specify every single layer, but each layers name cannot have spaces**. **The rarity is specified in the single layer name after the '#' character, after this character you can insert the percentage of presence of the trait**.

* _name_: is the name of the collection.

* _description_: is the description of the collection.

* _image_: is the place where all your media will be hosted. Usually people host their media on their server or on Pinata IPFS.

* _extraMetadata_: contains some extra metadata you can choose to add at the end of each .json file.

In this example 11 unique and random GIFs were generated. Six of which won't have _4-eyes_ and _5-lip_ as background.

### Update metadata
Open the _update-info.cpp_ file located in the _src_ folder. That's the part of the code to modify:
```c++
const string name = "wow nice work";
const string description = "CeloPunks Animated Edition is a collection of 1500 unique special animated punks. Not affiliated with LarvaLabs.";
const string image = "https://ipfs.io/ipfs/QmawoM7cYGBtxaUQNE5Sk5TCmYjQ7dFr4Bpi3SfHwD22pp";
const string format = "gif";
vector<int> collectionSize = {5, 6};
const vector<int> nLayers = {5, 3};
const vector<pair<string,string>> &extraMetadata = 
{
{"Compiler", "CeloPunks compiler"},
{"Github Author", "Goldo02"}
};
```
You already know what all these variables are for, except for _nLayers_. Here i put 5 and 3 because the first part of the collection has 5 layers: _1-background_, _2-character_, _3-head_, _4-eyes_, _5-lip_ and the second one has 3 layers: _1-background_, _2-character_, _3-head_. 


### Creating a gif preview
Open the _preview-gif.cpp_ file located in the _src_ folder. In this file there are only two parameter _numbOfMediaToGen_ which is a number that indicates the first _n_ GIFs that must be taken from the collection to generate the preview and _scale_, that is the output size.

Example:
```c++
const int numbOfMediaToGen = 11;
const int scale = 240;
```

This way the first 11 GIFs in our collection will be used to generate a preview. You can find the preview in the output folder

### Combine video and audio
Open the _combine-video-and-audio.cpp_ file located in the _src_ folder and change this variables:
```c++
const int numbOfVideoAndAudio = 1;
const string inputVideoForm = "mp4";
const string inputAudioForm = "mp3";
const string outputVideoForm = "mp4";
```

All the video and audio you want to combine should be placed in the tmp directory and should be numbered from 1 to _numbOfVideoAndAudio_. For example if you want to combine 3 mp4 video with 3 mp3 audio, you will have in the tmp folder:

|video|audio|video+audio|
|-----|-----|-----------|
|1.mp4|1.mp3|   1.mp4   |
|2.mp4|2.mp3|   2.mp4   |
|3.mp4|3.mp3|   3.mp4   |

You will find the output under output/video-with-audio
